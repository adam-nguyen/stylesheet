//
// #Vertical-rhythm
//

// Vertical-rhythmに対応した`font-size`(px)と`line-height`(単位なし)を返します。
// ------------------------------------------------------------------------
// @prop {Map} $fs($base-font-sizes) - フォントサイズと行の高さを取得します。
// @requires {Map} $base-font-sizes - ルート要素のフォントサイズをブレイクポイントごとに定義しています。
// @requires {Map} $breakpoints - ブレイクポイントごとにkeyとvalueを定義しています。
//
// @example scss - Usage
// .foo {
//     @include font-size($base-font-sizes);
// }
//
// @example css - CSS output
// .foo {
//     font-size: 14px;
//     line-height: 1.715;
// }
//
// @media screen and (min-width: 1000px) {
//     .foo {
//         font-size: 16px;
//         line-height: 1.75;
//     }
// }
//
@mixin font-size($fs: $base-font-sizes) {
    // ブレイクポイントを定義したmapを代入します。
    $bp: $breakpoints;

    // 引数に渡したフォントサイズ用のmapのkeyとvalueを取得します。
    @each $name, $unit in $fs {
        // mapのkeyが"base"の場合はブレイクポイントを指定せず値を渡します。
        @if $name == "base" {
             font-size: nth($unit, 1);
             line-height: nth($unit, 3);
        } @else {
            // mapのkeyが"base"以外の場合はブレイクポイントを追加します。
            @if map-has-key($bp, $name) {
                // mapのkeyをブレイクポイントを定義したmapに渡してvalueを取得します。
                @media #{map-get($bp, $name)} {
                    font-size: nth($unit, 1);
                    line-height: nth($unit, 3);
                }
            }
        }
    }
}

// プロパティごとにvertical-rhythmに対応した余白を指定します。
// -----------------------------------------------------
// @prop {String} $prop - プロパティ名を指定します。
// @prop {Number} $vr(1) - 指定したい行数を指定します。
// @prop {String} $important(false) - `!important`を指定したい場合は`important`を渡します。
// @requires {Map} $base-font-sizes - ルート要素のフォントサイズをブレイクポイントごとに定義しています。
// @requires {Map} $breakpoints - ブレイクポイントごとにkeyとvalueを定義しています。
//
// @example scss - Usage
// .foo {
//   @include vertical-rhythm(margin-top, 1);
//   @include vertical-rhythm(margin-bottom, 1);
// }
//
// @example css - CSS output
// .foo {
//   margin-top: 24px;
//   margin-bottom: 24px;
// }
// @media screen and (min-width: 1000px) {
//   .foo {
//     margin-top: 28px;
//   }
// }
// @media screen and (min-width: 1000px) {
//   .foo {
//     margin-bottom: 28px;
//   }
// }
//
@mixin vertical-rhythm($prop, $vr: 1, $important: false) {
    @if ($important == "important") {
        $important: unquote("!important");
    } @else {
        $important: null;
    }

    // ブレイクポイントを定義したmapを代入します。
    $bp: $breakpoints;

    // 引数に渡したフォントサイズ用のmapのkeyとvalueを取得します。
    @each $name, $unit in $base-font-sizes {
        // mapのkeyが"base"の場合はブレイクポイントを指定せず値を渡します。
        @if $name == "base" {
            #{$prop}: nth($unit, 2) * $vr $important;
        } @else {
            @if map-has-key($bp, $name) {
                // mapのkeyをブレイクポイントを定義したmapに渡してvalueを取得します。
                @media #{map-get($bp, $name)} {
                    #{$prop}: nth($unit, 2) * $vr $important;
                }
            }
        }
    }
}